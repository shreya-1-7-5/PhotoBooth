/* ================= RESET ================= */
*{
  box-sizing:border-box;
}

body{
  margin:0;
  padding:24px;
  font-family:"Courier New", "Courier", monospace;
  background:linear-gradient(135deg, #d4a574 0%, #c19a6b 50%, #b8956a 100%);
  min-height:100vh;
  color:#3d2817;
  position:relative;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4"/></filter><rect width="100" height="100" filter="url(%23noise)" opacity="0.05"/></svg>');
  pointer-events:none;
  z-index:1;
}

/* ================= APP LAYOUT ================= */
.app{
  max-width:1200px;
  margin:auto;
  display:grid;
  grid-template-columns:260px 1fr 260px;
  gap:24px;
  align-items:start;
  position:relative;
  z-index:2;
}

.app::before{
  content:"✦ PHOTOBOOTH ✦";
  position:absolute;
  top:-25px;
  left:50%;
  transform:translateX(-50%);
  font-size:28px;
  font-weight:bold;
  color:#5a3825;
  text-shadow:2px 2px 0 rgba(255,255,255,0.3);
  letter-spacing:3px;
}

/* ================= SIDE PANELS ================= */
.side-panel{
  background:#f5e6d3;
  border-radius:6px;
  padding:18px;
  box-shadow:
    0 4px 0 #8b6f47,
    0 8px 12px rgba(0,0,0,0.25),
    inset 0 1px 0 rgba(255,255,255,0.4);
  border:3px solid #a67c52;
  position:relative;
}

.side-panel::after{
  content:"";
  position:absolute;
  inset:8px;
  border:1px solid rgba(139,111,71,0.2);
  border-radius:3px;
  pointer-events:none;
}

.side-panel h4{
  margin:0 0 14px;
  font-size:15px;
  font-weight:700;
  color:#5a3825;
  letter-spacing:2px;
  text-transform:uppercase;
  text-align:center;
  border-bottom:2px solid #a67c52;
  padding-bottom:8px;
}

/* ================= CENTER PANEL ================= */
.center-panel{
  background:#f5e6d3;
  border-radius:6px;
  padding:20px;
  box-shadow:
    0 6px 0 #8b6f47,
    0 12px 20px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.4);
  border:4px solid #a67c52;
  position:relative;
  margin-top:8%;
}

.center-panel::after{
  content:"";
  position:absolute;
  inset:10px;
  border:1px solid rgba(139,111,71,0.2);
  border-radius:3px;
  pointer-events:none;
}

/* ================= CAMERA VIEW ================= */
.viewer{
  position:relative;
  width:100%;
  aspect-ratio:4/3;
  background:#000;
  border-radius:4px;
  overflow:hidden;
  box-shadow:
    inset 0 0 30px rgba(0,0,0,0.5),
    inset 0 0 0 8px #3d2817,
    inset 0 0 0 12px #8b6f47,
    0 4px 8px rgba(0,0,0,0.3);
  border:2px solid #5a3825;
}

video,
canvas{
  width:100%;
  height:100%;
  object-fit:cover;
}

canvas{
  position:absolute;
  inset:0;
}

/* ================= COUNTDOWN ================= */
#countdown{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  font-size:5rem;
  font-weight:700;
  color:#f5e6d3;
  background:rgba(0,0,0,0.7);
  z-index:5;
  text-shadow:
    0 0 20px rgba(245,230,211,0.8),
    3px 3px 0 #5a3825;
  font-family:"Courier New", monospace;
}

/* ================= CONTROLS ================= */
.controls,
.crop-controls{
  display:flex;
  gap:12px;
  margin-top:16px;
  justify-content:center;
  flex-wrap:wrap;
}

/* ================= BUTTONS ================= */
button,
a{
  padding:12px 20px;
  border-radius:4px;
  border:none;
  background:#8b6f47;
  color:#f5e6d3;
  font-size:13px;
  font-weight:700;
  cursor:pointer;
  text-decoration:none;
  transition:all .2s ease;
  font-family:"Courier New", monospace;
  letter-spacing:1px;
  text-transform:uppercase;
  box-shadow:
    0 3px 0 #5a3825,
    0 5px 8px rgba(0,0,0,0.3);
  position:relative;
}

button:hover,
a:hover{
  background:#a67c52;
  transform:translateY(-2px);
  box-shadow:
    0 5px 0 #5a3825,
    0 8px 12px rgba(0,0,0,0.4);
}

button:active,
a:active{
  transform:translateY(1px);
  box-shadow:
    0 1px 0 #5a3825,
    0 2px 4px rgba(0,0,0,0.3);
}

a[hidden]{
  display:none;
}

/* ================= BUTTON VARIANTS ================= */
#retake{
  background:#6b5644;
}
#retake:hover{
  background:#7d6652;
}

#applyCrop{
  background:#5a7a52;
}
#applyCrop:hover{
  background:#6b8b63;
}

#snap{
  background:#c19a6b;
  color:#3d2817;
}
#snap:hover{
  background:#d4a574;
}

/* ================= STATUS ================= */
#status{
  margin-top:14px;
  text-align:center;
  font-size:14px;
  color:#5a3825;
  font-weight:600;
  letter-spacing:1px;
  text-shadow:1px 1px 0 rgba(255,255,255,0.5);
  font-family:"Courier New", monospace;
}

/* ================= GALLERY ================= */
.gallery-list{
  display:flex;
  flex-direction:column;
  gap:12px;
}

.gallery-item{
  position:relative;
}

.gallery-thumb{
  width:100%;
  height:110px;
  object-fit:cover;
  border-radius:4px;
  cursor:pointer;
  background:#e6d4c1;
  border:3px solid #8b6f47;
  transition:transform .2s ease, box-shadow .2s ease;
  box-shadow:
    0 2px 0 #5a3825,
    0 4px 6px rgba(0,0,0,0.2);
}

.gallery-thumb:hover{
  transform:translateY(-3px);
  box-shadow:
    0 4px 0 #5a3825,
    0 8px 12px rgba(0,0,0,0.3);
}

.gallery-empty{
  text-align:center;
  color:#8b6f47;
  font-style:italic;
  font-size:13px;
}

/* ================= GALLERY DELETE ================= */
.gallery-delete{
  position:absolute;
  top:6px;
  right:6px;
  width:24px;
  height:24px;
  border-radius:50%;
  border:2px solid #5a3825;
  background:#8b3a3a;
  color:#f5e6d3;
  font-size:16px;
  line-height:1;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:
    0 2px 0 #5a1f1f,
    0 4px 6px rgba(0,0,0,0.3);
  transition:all .2s ease;
}

.gallery-delete:hover{
  background:#a64444;
  transform:translateY(-2px);
  box-shadow:
    0 3px 0 #5a1f1f,
    0 6px 10px rgba(0,0,0,0.4);
}

/* ================= CROP BOX ================= */
.crop-box{
  position:absolute;
  border:3px dashed #c19a6b;
  border-radius:4px;
  background:rgba(193,154,107,0.15);
  cursor:move;
  display:none;
  box-shadow:0 0 0 2px rgba(61,40,23,0.3);
}

/* ================= FORM ELEMENTS ================= */
select{
  padding:10px 14px;
  border-radius:4px;
  border:2px solid #8b6f47;
  font-size:13px;
  font-weight:700;
  color:#3d2817;
  background:#f5e6d3;
  font-family:"Courier New", monospace;
  letter-spacing:1px;
  box-shadow:
    0 2px 0 #5a3825,
    0 3px 5px rgba(0,0,0,0.2);
  cursor:pointer;
  transition:all .2s ease;
}

select:hover{
  background:#ffe9d0;
  transform:translateY(-1px);
  box-shadow:
    0 3px 0 #5a3825,
    0 5px 8px rgba(0,0,0,0.3);
}

select:focus{
  outline:none;
  border-color:#a67c52;
}

/* ================= PHOTO COUNTER ================= */
.photo-counter{
  margin-top:16px;
  padding:12px;
  background:#e6d4c1;
  border:2px solid #8b6f47;
  border-radius:4px;
  text-align:center;
  box-shadow:
    0 2px 0 #5a3825,
    0 3px 5px rgba(0,0,0,0.2);
}

.photo-counter-number{
  font-size:32px;
  font-weight:700;
  color:#5a3825;
  display:block;
  line-height:1;
  text-shadow:1px 1px 0 rgba(255,255,255,0.5);
}

.photo-counter-label{
  font-size:11px;
  color:#8b6f47;
  letter-spacing:2px;
  text-transform:uppercase;
  margin-top:4px;
  display:block;
}

/* ================= GALLERY PAGE ================= */
.gallery-page{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
  gap:16px;
  margin:20px 0;
}

.gallery-page .gallery-thumb{
  height:200px;
}

h2{
  text-align:center;
  color:#5a3825;
  font-size:32px;
  letter-spacing:3px;
  text-shadow:2px 2px 0 rgba(255,255,255,0.3);
  margin-top:0;
}

.see-all{
  width:100%;
  margin-top:12px;
}

/* ================= RESPONSIVE ================= */
@media(max-width:1000px){
  .app{
    grid-template-columns:1fr;
  }
  
  .app::before{
    position:static;
    transform:none;
    display:block;
    text-align:center;
    margin-bottom:20px;
  }
}